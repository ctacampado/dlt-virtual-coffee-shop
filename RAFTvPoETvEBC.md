# Raft, Proof of Elapsed Time (PoET), and Ethereum Beacon Chain

## Raft (Reliable, Replicated, Redundant, And Fault-Tolerant)
Raft is a distributed consensus algorithm that follows a Leader-Follower model. In order to explain how Raft works, let's have an example. Let's say a 4-node cluster that uses Raft is freshly deployed and is started at the same time. Each node  will execute a random timer and wait for it to time-out. When a timer elapses for a certain node, it will trigger an election and then turning itself in to a candidate. After becoming a candidate, it will broadcast a vote request message to its peers. Once a peer receives a vote request, it will send a response vote. When a candidate receives majority of the vote it will then act as leader and will be the one responsible for distributing data to its peers. In the case where nodes times-out at the same time, it will not reach majority votes hence will execute another timer with a random time-out. Log replication is then made when a client sends data to the leader and the leader will then piggyback the said data update together with the heartbeat message to its followers.

Raft was designed as a Crash Fault Tolerant (CFT) consensus algorithm but not Byzantine Fault Tolerant (BFT). This means that it can withstand node failures but because of its leader-follower nature the leader can misbehave or become adversarial resulting to a compromise of the network since all follower nodes will just agree to the leader.

Applications in the enterprise typically runs in a controlled and secured environment. If such is the case, it is acceptable to use Raft provided that all security and needed processes to prevent malicious attackers are implemented. On thew contrary, Raft is not adviseable for an open network like public blockchains.

## Proof of Elapsed Time
Proof of Elapsed Time (PoET) is a distributed consensus mechanism that seems to take bits of pieces from other consensus algorithms but in an efficient and novel way. It has a pluggable consensus which means that you can customize how it can best fit a certain use case. It currently supports PBFT, BFT, CFT, and Raft.

PoET is similar to Proof of Work (PoW) but instead of solving a hash puzzle it executes a timer with a random time-out (similar to Raft) and the first node to time out will be the one to package the transaction into a candidate block and proposes it for other nodes to consume and validate on their own. This makes PoET more efficient than PoW in terms of time and energy. In addition, PoET does not have absolute finality which means, just like PoW, there will be a fork for moments where two or more nodes time-out at the same time. But since it is faster for PoET to propose a block, resolution time is so much more efficient. 

Ultimately, where PoET shines is with its BFT implementation via Intel's Software Guard Extension (SGX). The code that runs the timer and waits for the time out is running inside a protected memory called an enclave. SGX is the one securing the enclave from application level code and from tampering because it is equipped with cryptographic verification procedures (digital signing). In simple terms, it runs inside the chip and not in the kernel or user space making it impossible to modify the timer. The only down side right now (for consumers, not for Intel) is that the BFT implementation relies on Intel hardware. This of course does not mean other manufacturers cannot create a similar feature in their hardware to support this.

Hyperledger Sawtooth, the blockchain platform that is utilizing PoET, is targeted for enterprise applications (private network) but it can also be used to implement a public network because of BFT. And due to the pluggable consensus, you can take advantage of let's say PoET pBFT/Raft in a private network for fast transactions and later on, scale to either private or public and then use PoET SGX.

In terms of performance, PoET is obviously slower than Raft because PoET is a lottery-based consensus similar to Proof of Work and Proof of Stake which means it will still take time to validate blocks and resolve forks unlike Raft that is non-forking and has a leader-follower model where the leader node automatically produces the candidate blocks while the follower blocks just votes.

## Ethereum Beacon Chain
Beacon Chain is one of the major changes coming to Ethereum 2.0. It is a second chain in parallel with Ethereum 1.0's PoW chain. It acts as a consensus manager where instead of anyone being able to participate in the consensus, it uses a new consensus protocol called Proof of Stake (PoS). In PoS, an actor that wants to participate in the consensus would have to register to a validator pool by depositing a specific amount of ethers via a smart contract called a burn contract. If the said actor is able to deposit the said amount of ethers it becomes a part of a validator pool. The beacon chain will then generate a random number and this number is used to sample the number of validators from the validator pool. This is done to prevent high concentration of actors joining mining farms which will eventually result to centralized groups taking over the network and the validation process which is similar to what is currently happening in the Bitcoin network. Validated blocks are then placed in the data layer of Ethereum 2.0, which is called the shard chain.

The introduction of PoS to Ethereum, together with the rest of the feature set of Ethereum 2.0 is its answer to slow transaction processing. PoS, because of the limited number of validators, has the potential to have transaction speeds comparable or even better than the consensus in private blockhains like PoET and Raft. Aside from transaction speed, it also solves the issue of centralized groups taking over the network. This consensus approach, coming from a public blockchain, is a well thought out compromise in decentralization. 

## A Reoccurring Theme
When looking at Raft, PoET, and Ethereum Beacon Chain's Proof of Stake, one major component among all of these consensus algorithms/protocols is a random number generator. A random time out is used in both Raft and PoET while a random number is used by Beacon Chain for sampling of validators. Because of the decentralized nature of the systems that uses these consensus mechanisms, randomness adds a layer of security because it will be difficult for malicious actors to manipulate the process because it is not deterministic.
